<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VFind - Duel</title>
  <link rel="stylesheet" href="style/main.css" />
</head>
<body class="duel-container">
  <header>
    <h1>⚔️ Mode Duel</h1>
    <nav>
      <a href="index.html">🏠 Accueil</a>
      <a href="profil.html">👤 Profil</a>
      <a href="parametres.html" class="btn-icon">⚙️</a>
    </nav>
    <!-- ✅ Jetons affichés directement dans le header -->
    <p style="text-align:center; margin-top: 0.5rem;">
      🎟️ Jetons : <span id="jetons">0</span>
    </p>
  </header>

  <main>
    <section class="pub-zone">
      <p>🔒 Une pub est requise pour lancer le duel</p>
      <button onclick="showAd('interstitial')" class="btn-secondary">▶️ Voir la pub</button>
    </section>

    <section class="defi-zone">
      <h2 id="duel-challenge">Défi en cours de chargement...</h2>
      <button id="nouveau-duel" class="btn-main">🔁 Nouveau duel</button>
    </section>

    <section class="duel-photos">
      <div class="duel-photo">
        <h3>👤 Joueur A</h3>
        <div class="cadre-preview">
          <img src="photos/photo_joueurA.jpg" class="photo-user cover" onclick="toggleFit(this)">
          <img src="cadres/polaroid_01.png" class="photo-cadre">
        </div>
        <button class="btn-flag report-button">🚩 Signaler</button>
      </div>
      <div class="duel-photo">
        <h3>👤 Joueur B</h3>
        <div class="cadre-preview">
          <img src="photos/photo_joueurB.jpg" class="photo-user cover" onclick="toggleFit(this)">
          <img src="cadres/polaroid_01.png" class="photo-cadre">
        </div>
        <button class="btn-flag report-button">🚩 Signaler</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 VFind</p>
  </footer>

  <script src="js/storage.js"></script>
  <script src="js/userData.js"></script>
  <script src="js/polaroid.js"></script>
  <script src="js/pub.js"></script>
  <script src="js/duel.js"></script>

  <script>
    function toggleFit(img) {
      img.classList.toggle('cover');
      img.classList.toggle('contain');
    }

    // ✅ Mise à jour auto des jetons
    document.addEventListener("DOMContentLoaded", () => {
      const jetonsSpan = document.getElementById("jetons");
      if (jetonsSpan && typeof getJetons === "function") {
        jetonsSpan.textContent = getJetons();
      }
    });
  </script>
</body>
</html>
