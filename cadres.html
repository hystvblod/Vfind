<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VFind - Mes cadres</title>
  <link rel="stylesheet" href="style/main.css"/>
</head>
<body class="vfind-bg">

  <header class="profil-header">
    <a href="profil.html" class="back-btn">ðŸ”™</a>
    <h1>ðŸŽ¨ Mes cadres</h1>
  </header>

  <main>
    <section class="cadres-possedes">
      <div class="grid-cadres" id="cadres-list">
        <!-- Les cadres possÃ©dÃ©s seront injectÃ©s ici -->
      </div>
    </section>

    <section class="cadre-preview-section">
      <h2 style="text-align:center; color:white;">AperÃ§u du cadre sÃ©lectionnÃ©</h2>
      <div class="cadre-preview">
        <img class="photo-cadre" id="cadre-preview-img" src="./assets/cadres/polaroid_01.webp" />
        <img class="photo-user" src="./assets/img/exemple.jpg" />
      </div>
    </section>
  </main>

  <footer>
    <p>Â© 2025 VFind</p>
  </footer>

  <script src="js/userData.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cadresPossedes = getCadresPossedes();
    const cadreActif = getCadreSelectionne();
    const cadresContainer = document.getElementById("cadres-list");

    cadresPossedes.forEach(cadre => {
      const div = document.createElement("div");
      div.className = "cadre-item";
      div.innerHTML = `
        <img src="./assets/cadres/${cadre}.webp" alt="${cadre}" onclick="zoomCadre('${cadre}')" />
        <button onclick="selectionnerCadre('${cadre}')" ${cadre === cadreActif ? "disabled" : ""}>
          ${cadre === cadreActif ? "âœ… UtilisÃ©" : "Utiliser"}
        </button>
      `;
      cadresContainer.appendChild(div);
    });

    const previewImage = document.getElementById("cadre-preview-img");
    previewImage.src = `./assets/cadres/${cadreActif}.webp`;
  });

  function selectionnerCadre(nomCadre) {
    setCadreSelectionne(nomCadre);
    alert("âœ… Cadre sÃ©lectionnÃ© !");
    location.reload();
  }

  function zoomCadre(cadre) {
    const popup = document.createElement("div");
    popup.className = "popup show";
    popup.innerHTML = `
      <div class="popup-inner">
        <button id="close-popup" onclick="document.body.removeChild(this.parentNode.parentNode)">âœ–</button>
        <div class="cadre-preview cadre-popup">
          <img class="photo-cadre" src="./assets/cadres/${cadre}.webp" />
          <img class="photo-user" src="./assets/img/exemple.jpg" />
        </div>
      </div>
    `;
    document.body.appendChild(popup);
  }
</script>

</body>
</html>
